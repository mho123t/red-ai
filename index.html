<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>لوحة تحكم مطعم ريدان</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #fff3e0;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #c62828;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 24px;
    }
    .orders {
      padding: 20px;
    }
    .order {
      background-color: #ffffff;
      border: 2px solid #ffab91;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    .order button {
      margin: 5px;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .accept {
      background-color: #388e3c;
      color: white;
    }
    .reject {
      background-color: #d32f2f;
      color: white;
    }
    .delete {
      background-color: #9e9e9e;
      color: white;
    }
    .popup {
      display: none;
      position: fixed;
      top: 20%;
      left: 10%;
      right: 10%;
      background: #fff8e1;
      padding: 20px;
      border: 2px solid #ffa000;
      border-radius: 10px;
      z-index: 999;
      text-align: center;
    }
  </style>
</head>
<body>

<header>🛎️ لوحة التحكم - مطعم ريدان</header>

<div class="orders" id="ordersContainer">
  <!-- الطلبات تظهر هنا -->
</div>

<div class="popup" id="popup">
  📢 تم استلام طلب جديد!
</div>

<audio id="notifySound">
  <source src="https://www.soundjay.com/buttons/sounds/button-3.mp3" type="audio/mpeg">
</audio>

<script>
  let orders = [];

  function playSound() {
    const sound = document.getElementById("notifySound");
    sound.play();
  }

  function showPopup() {
    const popup = document.getElementById("popup");
    popup.style.display = "block";
    setTimeout(() => popup.style.display = "none", 3000);
  }

  function addOrderToUI(order, index) {
    const container = document.getElementById("ordersContainer");
    const div = document.createElement("div");
    div.className = "order";
    div.innerHTML = `
      <h4>اسم: ${order.name}</h4>
      <p>الطلب: ${order.items.join(", ")}</p>
      <p>طريقة الطلب: ${order.type}</p>
      <p>رقم: ${order.phone || "—"}</p>
      <p>${order.table ? "رقم الطاولة: " + order.table : ""}</p>
      <p>${order.time ? "الوقت: " + order.time : ""}</p>
      <button class="accept" onclick="updateStatus(${index}, 'تم القبول ✅')">قبول</button>
      <button class="reject" onclick="updateStatus(${index}, 'تم الرفض ❌')">رفض</button>
      <button class="delete" onclick="deleteOrder(${index})">مسح</button>
      <p id="status-${index}" style="margin-top:10px; font-weight:bold;"></p>
    `;
    container.appendChild(div);
  }

  function updateStatus(index, status) {
    document.getElementById(`status-${index}`).textContent = status;
  }

  function deleteOrder(index) {
    orders.splice(index, 1);
    renderOrders();
  }

  function renderOrders() {
    document.getElementById("ordersContainer").innerHTML = "";
    orders.forEach((order, index) => {
      addOrderToUI(order, index);
    });
  }

  // Simulate receiving orders every 10 seconds (replace with actual source like WebSocket later)
  setInterval(() => {
    const sampleOrder = {
      name: "عميل " + (orders.length + 1),
      items: ["مندي دجاج", "مظبي لحم"],
      type: "استلام من المحل",
      phone: "058000000" + orders.length
    };
    orders.push(sampleOrder);
    renderOrders();
    playSound();
    showPopup();
  }, 15000); // كل 15 ثانية لإظهار الطلب الوهمي

</script>
</body>
</html>